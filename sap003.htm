<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.23.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru">
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251" />
<title>Сапёрчег</title>
</head>
<body>
<div>
<pre>
<script type="text/javascript">



function calculAr(inputData) {
    var i,j;
    var N=inputData.length;
    var M=inputData[0].length;
    var outputData = new Array(N);
    for (i=0;i<N;i++) {
        outputData[i] = new Array(M);
    }
    for (i=0;i<N;i++) {
        for (j=0;j<M;j++) {
            if (inputData[i][j]=='*') { 
                outputData[i][j]=10; 
            } else {
                outputData[i][j]=0;  
            }
        }  
    }
    
    for (i=0;i<N;i++) {
        for (j=0;j<M;j++) {
           if (outputData[i][j]>=10) {
              if (i && j) {
                 outputData[i-1][j-1]++; 
              }
              if (j) outputData[i][j-1]++;
              if (i<(N-1) && j) outputData[i+1][j-1]++;
              if (i) outputData[i-1][j]++;
              if (i<(N-1))  outputData[i+1][j]++;
              if (i && j<(M-1))  outputData[i-1][j+1]++;
              if (j<(M-1))  outputData[i][j+1]++;
              if (i<(N-1) && j<(M-1))  outputData[i+1][j+1]++;
                 }
        }  
    }
    
    return outputData;
}


function printAr(outAr)
{
    var i,j;
    
    for (i=0;i<outAr.length;i++) {
        for (j=0;j<outAr[i].length;j++) {
            if (j==0) { document.write("<br /><br />"); }
            if (outAr[i][j]>=10) {
                document.write(" *  ");
            } else {
                document.write(" "+outAr[i][j]+" "+ " "+" ");
            }
        }
    }
}

var inAr = [
    ['.', '.', '.', '*'],
    ['.', '.', '.', '.'],
    ['.', '*', '.', '.'],
    ['*', '.', '.', '*']
];

printAr(calculAr(inAr));

</script>
</pre>
</div>
</body>
</html>
